<div  style="padding: 1% 5%;">
<div  class="flex-p"   >
    <!--start card   -->
    <mat-card class="custom-card">


        <!--start card header  -->
        <mat-card-header class="bg-primary" fxLayoutAlign="space-between center">
            <mat-card-title class="p-1"><h6>{{'SP.users'|translate}}</h6></mat-card-title>
<!--            [matMenuTriggerFor]="generalAction" #menuTrigger="matMenuTrigger"-->
            <button *hasPermission="permsEnum.SP_ADD_RELATED_USERS"  (click)="addUser()"  mat-icon-button >
                <mat-icon>person_add</mat-icon>
            </button>

        </mat-card-header>
        <!--end card header  -->


        <!--start card content  -->
        <mat-card-content class="p-">


            <!-- start include App filter Component -->
            <app-filter-form  [componentObject]="this"></app-filter-form>
            <!-- end include App filter Component -->


            <!--                  <div  class="flex-p" >-->
            <!--start table  -->   <!--  matSortDisableClear matSortDirection="desc"-->
            <mat-table #table [dataSource]="dataSource" class="mat-elevation-z8" matSort
                       (matSortChange)="sortColumn($event)">

          <!--      <ng-container matColumnDef="id">
                    <mat-header-cell *matHeaderCellDef mat-sort-header>
                        <label class="table-cell-light">{{'USERS.id'| translate}}</label>
                    </mat-header-cell>
                    <mat-cell *matCellDef="let userRep"> {{userRep.user.id}} </mat-cell>
                </ng-container>-->

                    <ng-container matColumnDef="firstName">
                       <mat-header-cell *matHeaderCellDef>
                           <label class="table-cell-light">{{'registration.firstName'| translate}}</label>
                       </mat-header-cell>
                       <mat-cell *matCellDef="let userRep"> {{userRep.user.firstName}} </mat-cell>
                   </ng-container>

                <ng-container matColumnDef="lastName">
                    <mat-header-cell *matHeaderCellDef>
                        <label class="table-cell-light">{{'registration.lastName'| translate}}</label>
                    </mat-header-cell>
                    <mat-cell *matCellDef="let userRep"> {{userRep.user.lastName}} </mat-cell>
                </ng-container>


                <ng-container matColumnDef="userName">
                    <mat-header-cell *matHeaderCellDef>
                        <label class="table-cell-light">{{'registration.userName'| translate}}</label>
                    </mat-header-cell>
                    <mat-cell *matCellDef="let userRep"> {{userRep.user.userName}} </mat-cell>
                </ng-container>
                     <ng-container matColumnDef="country">
                            <mat-header-cell *matHeaderCellDef>
                                <label class="table-cell-light">{{'registration.country'| translate}}</label>
                            </mat-header-cell>
                            <mat-cell *matCellDef="let userRep"> {{userRep.user.country? userRep.user.country.nameAr:''}} </mat-cell>
                        </ng-container>
                         <ng-container matColumnDef="city">
                                  <mat-header-cell *matHeaderCellDef>
                                      <label class="table-cell-light">{{'registration.city'| translate}}</label>
                                  </mat-header-cell>
                                  <mat-cell *matCellDef="let userRep"> {{userRep.user.city? userRep.user.city.nameAr:''}} </mat-cell>
                              </ng-container>-->

                    <ng-container matColumnDef="status">
                        <mat-header-cell *matHeaderCellDef>
                            <label class="table-cell-light">{{'USERS.status'| translate}}</label>
                        </mat-header-cell>
                        <mat-cell  *matCellDef="let userRep">
                            <mat-chip-list>
                                <mat-chip  color="{{userRep.user.status != 0 ?'warn':'primary'}}" selected="true"  class="info-chip">
                                    <!-- <mat-icon class="icon-sm">trending_up</mat-icon>37%&ndash;&gt;-->
                                    {{(userRep.user.status== 0 ? 'GENERIC.status.active'  : 'GENERIC.status.inActive') | translate }}
                                </mat-chip>
                            </mat-chip-list>
<!--                            {{(userRep.user.status == 0 ? 'GENERIC.status.active'  : 'GENERIC.status.inActive') | translate }} -->

                        </mat-cell>
                    </ng-container>

                <ng-container matColumnDef="comments">
                    <mat-header-cell *matHeaderCellDef>
                        <label class="table-cell-light">{{'GENERIC.comments'| translate}}</label>
                    </mat-header-cell>
                    <mat-cell  *matCellDef="let userRep">
                        <mat-chip-list *ngIf="userRep.user.masterUserFlag == 1">
                            <mat-chip  color="accent" selected="true"  class="info-chip">
                                {{'USERS.masterUser'  | translate }}
                            </mat-chip>
                        </mat-chip-list>


                    </mat-cell>
                </ng-container>




                <ng-container matColumnDef="actions">
                    <mat-header-cell *matHeaderCellDef>
                        <label class="table-cell-light">{{'GENERIC.actions'| translate}}</label>
                    </mat-header-cell>
                    <mat-cell *matCellDef="let userRep">

                        <ng-container *hasPermission="permsEnum.SP_UPDATE_RELATED_USERS_PERMISSIONS">
                            <button      mat-button color="primary" (click)="editUserPermission (userRep.user)">
                                <mat-icon>edit</mat-icon>
                                <span>{{'GENERIC.action.edit'|translate}}</span>
                            </button>
                        </ng-container>

                         <ng-container *hasPermission="permsEnum.SP_DEACTIVATE_RELATED_USERS">
                          <button  *ngIf="userRep.user.status  == 0"  mat-button color="warn" (click)="deActivateUser(userRep.user.id)">
                        <mat-icon>block</mat-icon>
                        <span>{{'GENERIC.action.deactivate'|translate}}</span>
                       </button>
                         </ng-container>

                        <ng-container *hasPermission="permsEnum.SP_ACTIVATE_RELATED_USERS">
                       <button    *ngIf="userRep.user.status  != 0 " mat-button color="primary" (click)="activateUser(userRep.user.id)">
                        <mat-icon>done</mat-icon>
                        <span>{{'GENERIC.action.activate'|translate}}</span>
                       </button>
                       </ng-container>

                    </mat-cell>
                </ng-container>
                <!--end Actions container -->


                <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
                <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
            </mat-table>
            <!--end table  -->



        </mat-card-content>
        <!--end card content  -->

        <!--start include  paginator -->
        <app-pagination [componentObject]="this"></app-pagination>
        <!--end  include paginator -->

    </mat-card>
    <!--start card   -->




    <!--spinner-->
    <div *ngIf="!dataSource" fxLayout="column" fxLayoutAlign="center center" class="user-spinner">
        <mat-spinner color="primary"></mat-spinner>
    </div>

<!--    &lt;!&ndash;  menu trigger for genral action for table &ndash;&gt;
    <mat-menu #generalAction="matMenu" xPosition="before" overlapTrigger="true">
                  <span (mouseleave)="menuTrigger.closeMenu()">
                            <button color="primary" mat-button type="button" (click)="navigateToAddUser(null)">
                            <mat-icon> add</mat-icon>
                                <span>{{'GENERIC.action.add'|translate}}</span>
                            </button>
                  </span>
    </mat-menu>-->
</div>
</div>
